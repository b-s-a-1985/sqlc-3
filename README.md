# SQLC + PostgreSQL demo 

- BudBytes: [SQLC in Go - Auto-Generating Database Code in Golang](https://youtu.be/x_N2VjGQKr4?si=IFBLizdtTG91C3bA)

- visit [sqlc Github page](https://github.com/sqlc-dev/sqlc)

- install sqlc: ```go install github.com/sqlc-dev/sqlc/cmd/sqlc@latest```

- check if sqlc installed: ```sqlc```

- check if PostgreSQL service is active on Linux: ```sudo service postgresql status```

- check if PostgrSQL service is active on Windows: ```Start -> Run -> services.msc```

- sqlc Github page Getting started with PostgreSQL: ```go mod init tutorial.sqlc.dev/app```

- initialize go module ```go mod init sqlc3```

- get necessery dependences: ```go mod tidy```

- create main configuration file of sqlc: ```sqlc.yml```

- visit [Getting started with PostgreSQL](docs.sqlc.dev/en/latest/tutorials/getting-started-postgresql.html)  > paste content of Setting up devision into sqlc.yml file  

- changes in config file (name of demo project):    
```package: "products"```  
```out: "products"```

- remove the last row from config file: ```sql_package: "pgx/v5"```

- create file: ```schema.sql```. It tells the database structure (tables, columns etc...).  

- create file: ```query.sql```. It holds sql sentences which will be autogenerated into go interfaces.

- visit [PostgreSQL â€“ Foreign Key](https://www.geeksforgeeks.org/postgresql-foreign-key/)

- generate product folder: ```sqlc generate```

- the above command generates go functions in ```db.go```

- visit [sql driver for go](https://github.com/lib/pq)

- install sql driver for go: ```go get github.com/lib/pq```

- connect to PostgreSQL via terminal: ```psql -U postgres -h localhost```

- create database: ```create database sqlctest;```

- connect to database sqlctest: ```\c sqlctest```

- create ```script.sql``` with the folloing content:  
```
CREATE TABLE IF NOT EXISTS product (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    price NUMERIC(6,2) NOT NULL,
    available BOOLEAN,
    created timestamp DEFAULT NOW()
)
```

- create table running script in terminal: ```\i /home/bodnars/Documents/go-workspace/sqlc-1/script.sql```
- verify if table created: ```\dt```

- insert data into table:  
```INSERT INTO product (name, price, available) VALUES ('Book', 10.99, true);```

- verify content of table: ```SELECT * FROM product;```
- add another 2 rows to the table:
```INSERT INTO product (name, price, available) VALUES ('Video Game', 60.99, true);```
```INSERT INTO product (name, price, available) VALUES ('TV', 360.99, false);```

- write file ```main.go```
- after running main.go no output

